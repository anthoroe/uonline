mixin instanceLink(name, url, text)
	//- warning: text is not escaped
	if instance === name
		li.active
			a(href=url) !{text}
	else
		li
			a(href=url) !{text}

doctype 5
html
	head
		meta(charset='utf-8')
		title
			block title
		link(href='/bootstrap/css/bootstrap.min.css', rel='stylesheet', media='screen')
		style.
			body { padding-top: 60px; }
		link(href='/bootstrap/css/bootstrap-responsive.min.css', rel='stylesheet', media='screen')
		// if lt IE 9
			script(src='http://html5shim.googlecode.com/svn/trunk/html5.js')
		script(src='http://code.jquery.com/jquery-latest.js')
		script(src='/bootstrap/js/bootstrap.min.js')
	body
		div.navbar.navbar-fixed-top
			div.navbar-inner
				div.container
					a.brand(href='/') uonline
					ul.nav
						+instanceLink('about','/about/','Об игре')
					ul.nav.pull-right
						if loggedIn === true
							li
								a(href='/profile/')
									i(class=(admin?'icon-certificate':'icon-user'))
									| #{' '}#{login}
							//- TODO: profile && profileIsMine
							//- <li {% if instance == 'profile' and profileIsMine == true %} class="active" {% endif %}><a href="/profile/">Профиль</a></li>
							//- TODO: game
							//- <li {% if instance == 'game' %} class="active" {% endif %}><a href="/game/">Игра</a></li>
							li
								a(href='/action/logout') Выйти
						else
							+instanceLink('login', '/login/', '<i class="icon-chevron-right"></i> Вход')
							+instanceLink('register', '/register/', 'Регистрация')
						if admin === true
							li.divider-vertical
							+instanceLink('stats', '/stats/', 'Статистика')
							if databaseIsOutdated === true
								li.divider-vertical
								li
									p.navbar-text
										i.icon-warning-sign
										| #{' '}Нужно обновить БД

		div.container
			div#content
				block content
			hr
			footer
				p.muted &copy; m1kc и К<sup>о</sup>, 2012&ndash;#{ now.getFullYear() }
