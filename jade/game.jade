extends layout
block title
	//- TODO: typography
	| #{location_name}
block content
	//- TODO: typography
	.page-header
		h1 #{ location_name }#{' '}
			small #{ area_name }
	if pic != null
		img.img-polaroid(src=pic, style="float: right; margin-left: 1em; margin-bottom: 1em;")
	div
		//- TODO: {{ description | tf | nl2p | nl2br }}
		p #{ description }
	div
		p(style="line-height: 2.5em;")
			each i in ways
				//- TODO: typography
				a.btn(href="/action/go/"+i.to) #{i.name}
				| #{'\n'}
	div
		p
			small
				case players_list.length
					when 0
						| На этой локации больше никого нет
					when 1
						| Рядом с вами стоит#{' '}
					default
						| На этой локации находятся:#{' '}
				each i in players_list
					//- TODO: запятые
					| #{' '}
					a(href="/profile/id/"+i.id+"/") #{i.name}
				| #{'.'}

// cut --- cut --- cut --- cut
html
	body

		p
			small
				| {% if monsters_list|length > 0 %}
				| Монстры на этой локации:
				| {% for i in monsters_list %}
				a(href="#") {{ i.name }}
				| {% if not loop.last %}, {% endif %}
				| {% endfor %}
				// dirty layout
				p
					| {% if autoinvolved_fm %}
					b Вас атаковали!
					| {% endif %}
				p
					| {% if fight_mode %}
					a(href="/action/escape") Свалить
					| {% else %}
					a(href="/action/attack") Атаковать
					| {% endif %}
				| {% else %}
				| На этой локации нет монстров.
				| {% endif %}
		div(style="clear: both;")
		| {% endblock content %}
